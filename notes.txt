
****************************************************************
----------------------- PERSONAL NOTES -------------------------
****************************************************************

----------------------------------------------------------------

2025/10/10
this is interesting, check it out later (could unimplement uploadFallbackBuffer!!!)
    public:
        // Creates a TOP_Buffer you can fill with data from the CPU. Held in a OP_SmartRef.
        // This function is thread-safe and can be called
        // at any time in any thread, including from multiple threads at the same time.
        // You become owner of the TOP_Buffer, and must give it back to the node via a call in TOP_Output during execute()
        // or call release() on it yourself if you don't need it anymore.
        virtual OP_SmartRef<TOP_Buffer> createOutputBuffer(uint64_t size, TOP_BufferFlags flags, void* reserved) = 0;

        // If you don't need a buffer anymore, but want it to be available for a future create* call (avoiding an allocation)
        // You can return it using this function instead of calling release() on it. This allows it to be re-used for
        // another option potentially, avoiding a re-allocation.
        // Note: It is your responsibility to ensure there are nothing still holding onto this reference
        // elsewhere, otherwise it may be used in multiples spots at once.
        virtual void        returnBuffer(OP_SmartRef<TOP_Buffer>* buf) = 0;

        // Returns the CUDA device index the process is currently using. Returns -1 if this
        // node is not using CUDA execution mode.
        virtual int            getCUDADeviceIndex(void* reserved) = 0;

----------------------------------------------------------------

2025/10/10
another thing for later: the following method will be available in the 2025 release, change headers and use it when official build gets released.
    public:

        // Upload a TOP_Buffer you have filled in. The texture will be allocated at the resolution/format/dimension
        // as defined in 'info'. This function takes ownership of 'buf'. The OP_SmartRef will be empty after calling this.
        // Only usable in TOP_ExecuteMode::CPUMem
        virtual void        uploadBuffer(OP_SmartRef<TOP_Buffer>* buf, const TOP_UploadInfo& info, void* reserved) = 0;

        // Only usable in TOP_ExecuteMode::CUDA.
        // Creates a cudaArray which is the write destination for the texture as defined by the passed TOP_CUDAOutputInfo.
        // Fill in this memory with the texture data, and it will be used as the output for this TOP.
        virtual const OP_CUDAArrayInfo*    createCUDAArray(const TOP_CUDAOutputInfo& info, void* reserved) = 0;

        // Based on the Common page parameters of the node, this will give you the output width/height format
        // that has been selected. Usually you should use this as the OP_TextureDesc for the content you create,
        // but it can safely be ignored in cases where it makes sense.
        virtual void    getSuggestedOutputDesc(OP_TextureDesc* desc, void* reserved) = 0;

----------------------------------------------------------------
